import { Injectable, Directive, Input, Inject, InjectionToken, Optional, NgZone, EventEmitter, Output, Component, ElementRef, NgModule, defineInjectable } from '@angular/core';
import { Observable } from 'rxjs';
import { __spread } from 'tslib';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var YamapngService = /** @class */ (function () {
    function YamapngService() {
    }
    YamapngService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    YamapngService.ctorParameters = function () { return []; };
    /** @nocollapse */ YamapngService.ngInjectableDef = defineInjectable({ factory: function YamapngService_Factory() { return new YamapngService(); }, token: YamapngService, providedIn: "root" });
    return YamapngService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var YamapngComponent = /** @class */ (function () {
    function YamapngComponent() {
    }
    /**
     * @return {?}
     */
    YamapngComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    YamapngComponent.decorators = [
        { type: Component, args: [{
                    selector: 'lib-yamapng',
                    template: "\n    <p>\n      yamapng works!\n    </p>\n  "
                }] }
    ];
    /** @nocollapse */
    YamapngComponent.ctorParameters = function () { return []; };
    return YamapngComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var YamapngModule = /** @class */ (function () {
    function YamapngModule() {
    }
    YamapngModule.decorators = [
        { type: NgModule, args: [{
                    declarations: [YamapngComponent],
                    imports: [],
                    exports: [YamapngComponent]
                },] }
    ];
    return YamapngModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var WindowRef = /** @class */ (function () {
    function WindowRef() {
    }
    /**
     * @return {?}
     */
    WindowRef.prototype.getNativeWindow = /**
     * @return {?}
     */
    function () { return window; };
    return WindowRef;
}());
// tslint:disable-next-line:max-classes-per-file
var  
// tslint:disable-next-line:max-classes-per-file
DocumentRef = /** @class */ (function () {
    function DocumentRef() {
    }
    /**
     * @return {?}
     */
    DocumentRef.prototype.getNativeDocument = /**
     * @return {?}
     */
    function () {
        return document;
    };
    return DocumentRef;
}());
/** @type {?} */
var BROWSER_GLOBALS_PROVIDERS = [WindowRef, DocumentRef];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Token for the config of the YaMapsAPILoaderConfigLiteral. Please provide an object of type {\@link
 * YaMapsAPILoaderConfigLiteral}.
 * @type {?}
 */
var LAZY_MAPS_API_CONFIG = new InjectionToken('angular-ya-maps MAPS_API_CONFIG');
var YaMapsAPILoader = /** @class */ (function () {
    function YaMapsAPILoader(config, w, d) {
        if (config === void 0) { config = null; }
        this.config = config;
        this._windowRef = w;
        this._documentRef = d;
    }
    /**
     * @return {?}
     */
    YaMapsAPILoader.prototype.load = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var script = this._documentRef.getNativeDocument().createElement('script');
        script.type = 'text/javascript';
        script.async = false;
        script.defer = true;
        script.id = 'YaScript';
        script.src = "https://api-maps.yandex.ru/2.1/?apikey=" + this.config.apiKey + "&lang=ru_RU";
        // tslint:disable-next-line:ban-types
        this._scriptLoadingPromise = new Promise(function (resolve, reject) {
            script.onload = function () { resolve(); };
            script.onerror = function (error) { reject(); };
        });
        this._documentRef.getNativeDocument().body.appendChild(script);
        return this._scriptLoadingPromise;
    };
    YaMapsAPILoader.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    YaMapsAPILoader.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [LAZY_MAPS_API_CONFIG,] }] },
        { type: WindowRef },
        { type: DocumentRef }
    ]; };
    return YaMapsAPILoader;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var YaMapsAPIWrapper = /** @class */ (function () {
    function YaMapsAPIWrapper(_loader, _zone, d) {
        var _this = this;
        this._loader = _loader;
        this._zone = _zone;
        this._documentRef = d;
        this._map = new Promise(function (resolve) {
            _this._mapResolver = resolve;
        });
    }
    /**
     * @param {?} el
     * @param {?} mapOptions
     * @return {?}
     */
    YaMapsAPIWrapper.prototype.createMap = /**
     * @param {?} el
     * @param {?} mapOptions
     * @return {?}
     */
    function (el, mapOptions) {
        var _this = this;
        /** @type {?} */
        var res = this._loader.load().then(function () {
            /** @type {?} */
            var create = function () { return setTimeout(function () {
                if (ymaps.Map) {
                    /** @type {?} */
                    var map = new ymaps.Map(el, mapOptions);
                    _this._mapResolver((/** @type {?} */ (map)));
                }
                else {
                    create();
                }
            }, 100); };
            create();
        }).catch(function (e) { return console.log(e); });
        return res;
    };
    /**
     * @param {?} latitude
     * @param {?} longitude
     * @return {?}
     */
    YaMapsAPIWrapper.prototype.setCenter = /**
     * @param {?} latitude
     * @param {?} longitude
     * @return {?}
     */
    function (latitude, longitude) {
        this._map.then(function (map) {
            map.setCenter([latitude, longitude]);
        });
    };
    /**
     * @return {?}
     */
    YaMapsAPIWrapper.prototype.getCenter = /**
     * @return {?}
     */
    function () {
        return this._map.then(function (map) {
            return map.getCenter();
        });
    };
    /**
     * @param {?} points
     * @param {?} options
     * @return {?}
     */
    YaMapsAPIWrapper.prototype.panTo = /**
     * @param {?} points
     * @param {?} options
     * @return {?}
     */
    function (points, options) {
        this._map.then(function (map) {
            map.panTo(points, options);
        });
    };
    /**
     * @template E
     * @param {?} eventName
     * @return {?}
     */
    YaMapsAPIWrapper.prototype.subscribeToMapEvent = /**
     * @template E
     * @param {?} eventName
     * @return {?}
     */
    function (eventName) {
        var _this = this;
        return Observable.create(function (observer) {
            _this._map.then(function (m) {
                m.events.add(eventName, function (arg) { _this._zone.run(function () { return observer.next(arg); }); });
            });
        });
    };
    /**
     * @param {?} marker
     * @return {?}
     */
    YaMapsAPIWrapper.prototype.createMarker = /**
     * @param {?} marker
     * @return {?}
     */
    function (marker) {
        return this._map.then(function (map) {
            /** @type {?} */
            var m = new ymaps.Placemark([marker.latitude, marker.longitude], {
                balloonContentHeader: marker.balloonContentHeader,
                balloonContentBody: marker.balloonContentBody,
                balloonContentFooter: marker.balloonContentFooter,
                iconContent: marker.iconContent
            }, {
                draggable: marker.draggable,
                preset: marker.preset,
                iconLayout: marker.iconLayout,
                iconImageHref: marker.iconImageHref,
                iconImageSize: marker.iconImageSize,
                iconImageOffset: marker.iconImageOffset
            });
            map.geoObjects.add(m);
            return m;
        });
    };
    /**
     * @param {?} overlay
     * @return {?}
     */
    YaMapsAPIWrapper.prototype.removeGeo = /**
     * @param {?} overlay
     * @return {?}
     */
    function (overlay) {
        this._map.then(function (map) {
            map.geoObjects.remove(overlay);
        });
    };
    /**
     * @param {?} claster
     * @return {?}
     */
    YaMapsAPIWrapper.prototype.createClaster = /**
     * @param {?} claster
     * @return {?}
     */
    function (claster) {
        return this._map.then(function (map) {
            if (claster.markers.length === 0) {
                return;
            }
            /** @type {?} */
            var myGeoObjects;
            myGeoObjects = new Array();
            claster.markers.forEach(function (x) {
                /** @type {?} */
                var point = new ymaps.GeoObject({
                    geometry: { type: x.type, coordinates: [x.lat, x.lng] }
                });
                myGeoObjects.push(point);
            });
            /** @type {?} */
            var clusterer = new ymaps.Clusterer({});
            clusterer.add(myGeoObjects);
            map.geoObjects.add(clusterer);
            return clusterer;
        });
    };
    /**
     * @param {?} objectManager
     * @return {?}
     */
    YaMapsAPIWrapper.prototype.createObjectManager = /**
     * @param {?} objectManager
     * @return {?}
     */
    function (objectManager) {
        return this._map.then(function (map) {
            if (objectManager.datasource.length === 0) {
                return;
            }
            /** @type {?} */
            var nativeObjectManager = new ymaps.ObjectManager({
                clusterize: objectManager.clusterize,
                gridSize: objectManager.gridSize
            });
            nativeObjectManager.add(objectManager.datasource);
            nativeObjectManager.objects.options.set('preset', objectManager.objectPreset);
            nativeObjectManager.clusters.options.set('preset', objectManager.clasterPreset);
            map.geoObjects.add(nativeObjectManager);
            return nativeObjectManager;
        });
    };
    /**
     * @param {?} objectManager
     * @param {?} id
     * @return {?}
     */
    YaMapsAPIWrapper.prototype.navigateToGeoObject = /**
     * @param {?} objectManager
     * @param {?} id
     * @return {?}
     */
    function (objectManager, id) {
        /** @type {?} */
        var obj = objectManager.objects.getById(id);
        if (obj) {
            this.setCenter(obj.geometry.coordinates[0], obj.geometry.coordinates[1]);
            objectManager.objects.balloon.open(id);
        }
    };
    /**
     * @return {?}
     */
    YaMapsAPIWrapper.prototype.checkYaSciptLoaded = /**
     * @return {?}
     */
    function () {
        return this._documentRef.getNativeDocument().getElementById('YaScript');
    };
    /**
     * @param {?} objectManager
     * @param {?} filter
     * @return {?}
     */
    YaMapsAPIWrapper.prototype.objectManagerSetFilter = /**
     * @param {?} objectManager
     * @param {?} filter
     * @return {?}
     */
    function (objectManager, filter) {
        objectManager.setFilter(filter);
    };
    YaMapsAPIWrapper.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    YaMapsAPIWrapper.ctorParameters = function () { return [
        { type: YaMapsAPILoader },
        { type: NgZone },
        { type: DocumentRef }
    ]; };
    return YaMapsAPIWrapper;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var MarkerManager = /** @class */ (function () {
    function MarkerManager(_mapsWrapper, _zone) {
        this._mapsWrapper = _mapsWrapper;
        this._zone = _zone;
        this._markers = new Map();
    }
    /**
     * @param {?} marker
     * @return {?}
     */
    MarkerManager.prototype.deleteMarker = /**
     * @param {?} marker
     * @return {?}
     */
    function (marker) {
        var _this = this;
        /** @type {?} */
        var m = this._markers.get(marker);
        if (m == null) {
            return Promise.resolve();
        }
        // tslint:disable-next-line:no-shadowed-variable
        return m.then(function (m) {
            return _this._zone.run(function () {
                // tslint:disable-next-line:no-shadowed-variable
                _this.getNativeMarker(marker).then(function (m) {
                    _this._mapsWrapper.removeGeo(m);
                    _this._markers.delete(marker);
                });
            });
        });
    };
    /**
     * @param {?} marker
     * @return {?}
     */
    MarkerManager.prototype.addMarker = /**
     * @param {?} marker
     * @return {?}
     */
    function (marker) {
        /** @type {?} */
        var markerPromise = this._mapsWrapper.createMarker(marker);
        this._markers.set(marker, markerPromise);
    };
    /**
     * @param {?} marker
     * @return {?}
     */
    MarkerManager.prototype.showBalloon = /**
     * @param {?} marker
     * @return {?}
     */
    function (marker) {
        this.getNativeMarker(marker).then(function (m) {
            m.balloon.open();
        });
    };
    /**
     * @param {?} marker
     * @return {?}
     */
    MarkerManager.prototype.getNativeMarker = /**
     * @param {?} marker
     * @return {?}
     */
    function (marker) {
        return this._markers.get(marker);
    };
    /**
     * @template T
     * @param {?} eventName
     * @param {?} marker
     * @return {?}
     */
    MarkerManager.prototype.createEventObservable = /**
     * @template T
     * @param {?} eventName
     * @param {?} marker
     * @return {?}
     */
    function (eventName, marker) {
        var _this = this;
        return Observable.create(function (observer) {
            _this._markers.get(marker).then(function (m) {
                m.events.add(eventName, function (e) { return _this._zone.run(function () { return observer.next(e); }); });
            });
        });
    };
    MarkerManager.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    MarkerManager.ctorParameters = function () { return [
        { type: YaMapsAPIWrapper },
        { type: NgZone }
    ]; };
    return MarkerManager;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var markerId = 0;
var YaMarker = /** @class */ (function () {
    function YaMarker(_markerManager) {
        this._markerManager = _markerManager;
        this.draggable = false;
        this.preset = 'islands#blueIcon';
        this.markerClick = new EventEmitter();
        // tslint:disable-next-line:max-line-length
        this.dragEnd = new EventEmitter();
        this._markerAddedToManger = false;
        this._observableSubscriptions = [];
        this._id = (markerId++).toString();
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    YaMarker.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (!this._markerAddedToManger) {
            this._markerManager.addMarker(this);
            this._markerAddedToManger = true;
            this._addEventListeners();
            return;
        }
        if (changes['showInfo']) {
            this._markerManager.showBalloon(this);
        }
    };
    /**
     * @return {?}
     */
    YaMarker.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this._markerManager.deleteMarker(this);
        this._observableSubscriptions.forEach(function (s) { return s.unsubscribe(); });
    };
    /**
     * @private
     * @return {?}
     */
    YaMarker.prototype._addEventListeners = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        // click event
        /** @type {?} */
        var cs = this._markerManager.createEventObservable('click', this).subscribe(function () {
            _this._markerManager.showBalloon(_this);
            _this.markerClick.emit(null);
        });
        this._observableSubscriptions.push(cs);
        // dragend event
        // tslint:disable-next-line:max-line-length
        /** @type {?} */
        var ds = this._markerManager.createEventObservable('dragend', this).subscribe(function (e) {
            /** @type {?} */
            var thisPlacemark = e.get('target');
            /** @type {?} */
            var coords = thisPlacemark.geometry.getCoordinates();
            _this._markerManager.getNativeMarker(_this).then(function (m) {
                // tslint:disable-next-line:max-line-length
                _this.dragEnd.emit((/** @type {?} */ ({ lat: coords[0], lng: coords[1], nativeMarker: m })));
            });
        });
        this._observableSubscriptions.push(ds);
    };
    YaMarker.decorators = [
        { type: Directive, args: [{
                    // tslint:disable-next-line:directive-selector
                    selector: 'ya-marker',
                    providers: [
                        YaMapsAPIWrapper
                    ]
                },] }
    ];
    /** @nocollapse */
    YaMarker.ctorParameters = function () { return [
        { type: MarkerManager }
    ]; };
    YaMarker.propDecorators = {
        latitude: [{ type: Input }],
        longitude: [{ type: Input }],
        balloonLayout: [{ type: Input }],
        balloonContentHeader: [{ type: Input }],
        balloonContentBody: [{ type: Input }],
        balloonContentFooter: [{ type: Input }],
        draggable: [{ type: Input }],
        preset: [{ type: Input }],
        iconContent: [{ type: Input }],
        showInfo: [{ type: Input }],
        iconLayout: [{ type: Input }],
        iconImageHref: [{ type: Input }],
        iconImageSize: [{ type: Input }],
        iconImageOffset: [{ type: Input }],
        markerClick: [{ type: Output }],
        dragEnd: [{ type: Output }]
    };
    return YaMarker;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ClasterManager = /** @class */ (function () {
    function ClasterManager(_mapsWrapper, _zone) {
        this._mapsWrapper = _mapsWrapper;
        this._zone = _zone;
        this._clasters = new Map();
    }
    /**
     * @param {?} claster
     * @return {?}
     */
    ClasterManager.prototype.addClaster = /**
     * @param {?} claster
     * @return {?}
     */
    function (claster) {
        /** @type {?} */
        var clasterPromise = this._mapsWrapper.createClaster(claster);
        this._clasters.set(claster, clasterPromise);
    };
    ClasterManager.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    ClasterManager.ctorParameters = function () { return [
        { type: YaMapsAPIWrapper },
        { type: NgZone }
    ]; };
    return ClasterManager;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var clasterId = 0;
var YaClaster = /** @class */ (function () {
    function YaClaster(_clasterManager) {
        this._clasterManager = _clasterManager;
        this._markerAddedToManger = false;
        this._id = (clasterId++).toString();
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    YaClaster.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (!this._markerAddedToManger) {
            this._clasterManager.addClaster(this);
        }
    };
    /**
     * @return {?}
     */
    YaClaster.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () { };
    /**
     * @private
     * @return {?}
     */
    YaClaster.prototype._addEventListeners = /**
     * @private
     * @return {?}
     */
    function () { };
    YaClaster.decorators = [
        { type: Directive, args: [{
                    // tslint:disable-next-line:directive-selector
                    selector: 'ya-claster',
                    providers: [
                        YaMapsAPIWrapper
                    ]
                },] }
    ];
    /** @nocollapse */
    YaClaster.ctorParameters = function () { return [
        { type: ClasterManager }
    ]; };
    YaClaster.propDecorators = {
        markers: [{ type: Input }]
    };
    return YaClaster;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ObjectManagerManager = /** @class */ (function () {
    function ObjectManagerManager(_mapsWrapper, _zone) {
        this._mapsWrapper = _mapsWrapper;
        this._zone = _zone;
        this._managers = new Map();
    }
    /**
     * @param {?} manager
     * @return {?}
     */
    ObjectManagerManager.prototype.add = /**
     * @param {?} manager
     * @return {?}
     */
    function (manager) {
        /** @type {?} */
        var managerPromise = this._mapsWrapper.createObjectManager(manager);
        this._managers.set(manager, managerPromise);
    };
    /**
     * @param {?} manager
     * @param {?} id
     * @return {?}
     */
    ObjectManagerManager.prototype.navigateToGeoObject = /**
     * @param {?} manager
     * @param {?} id
     * @return {?}
     */
    function (manager, id) {
        var _this = this;
        this.getNativeManager(manager).then(function (p) {
            _this._mapsWrapper.navigateToGeoObject(p, id);
        });
    };
    /**
     * @param {?} manager
     * @return {?}
     */
    ObjectManagerManager.prototype.getNativeManager = /**
     * @param {?} manager
     * @return {?}
     */
    function (manager) {
        return this._managers.get(manager);
    };
    /**
     * @param {?} manager
     * @param {?} filter
     * @return {?}
     */
    ObjectManagerManager.prototype.setFilter = /**
     * @param {?} manager
     * @param {?} filter
     * @return {?}
     */
    function (manager, filter) {
        var _this = this;
        this.getNativeManager(manager).then(function (p) {
            _this._mapsWrapper.objectManagerSetFilter(p, filter);
        });
    };
    ObjectManagerManager.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    ObjectManagerManager.ctorParameters = function () { return [
        { type: YaMapsAPIWrapper },
        { type: NgZone }
    ]; };
    return ObjectManagerManager;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var markerId$1 = 0;
var YaObjectManager = /** @class */ (function () {
    function YaObjectManager(_manager) {
        this._manager = _manager;
        this.clusterize = false;
        this.clasterPreset = 'islands#blueIcon';
        this.objectPreset = 'islands#blueClusterIcons';
        this.gridSize = 0;
        this._observableSubscriptions = [];
        this._addedToManger = false;
        this._id = (markerId$1++).toString();
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    YaObjectManager.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (!this._addedToManger) {
            this._manager.add(this);
            this._addedToManger = true;
            return;
        }
        if (changes['selectedObjectId']) {
            this._manager.navigateToGeoObject(this, this.selectedObjectId);
        }
        if (changes['filter']) {
            this._manager.setFilter(this, this.filter);
        }
    };
    YaObjectManager.decorators = [
        { type: Directive, args: [{
                    // tslint:disable-next-line:directive-selector
                    selector: 'ya-object-manager',
                    providers: [
                        YaMapsAPIWrapper
                    ]
                },] }
    ];
    /** @nocollapse */
    YaObjectManager.ctorParameters = function () { return [
        { type: ObjectManagerManager }
    ]; };
    YaObjectManager.propDecorators = {
        clusterize: [{ type: Input }],
        datasource: [{ type: Input }],
        clasterPreset: [{ type: Input }],
        objectPreset: [{ type: Input }],
        gridSize: [{ type: Input }],
        selectedObjectId: [{ type: Input }],
        filter: [{ type: Input }]
    };
    return YaObjectManager;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var yandex;

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var YaMap = /** @class */ (function () {
    function YaMap(_elem, _mapsWrapper) {
        this._elem = _elem;
        this._mapsWrapper = _mapsWrapper;
        this.longitude = 0;
        this.latitude = 0;
        this.zoom = 8;
        this.mapType = 'yandex#map';
        this.controls = null;
        // tslint:disable-next-line:max-line-length
        this.mapClick = new EventEmitter();
        this.actionTick = new EventEmitter();
        this.mapInit = false;
        this._observableSubscriptions = [];
    }
    /**
     * @return {?}
     */
    YaMap.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        console.log('map iit');
        /** @type {?} */
        var container = this._elem.nativeElement.querySelector('.map-container-inner');
        this._initMapInstance(container);
        this.mapInit = true;
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    YaMap.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (this.mapInit) {
            this.updatePosition(changes);
            this.panTo(changes);
        }
    };
    /**
     * @private
     * @param {?} el
     * @return {?}
     */
    YaMap.prototype._initMapInstance = /**
     * @private
     * @param {?} el
     * @return {?}
     */
    function (el) {
        if (this.controls != null) {
            this._mapsWrapper.createMap(el, {
                center: [this.latitude, this.longitude], zoom: this.zoom, type: this.mapType,
                controls: this.controls
            });
        }
        else {
            this._mapsWrapper.createMap(el, {
                center: [this.latitude, this.longitude], zoom: this.zoom, type: this.mapType
            });
        }
        this._handleMapMouseEvents();
    };
    /**
     * @private
     * @param {?} changes
     * @return {?}
     */
    YaMap.prototype.updatePosition = /**
     * @private
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes['latitude'] == null && changes['longitude'] == null) {
            return;
        }
        this._mapsWrapper.setCenter(this.latitude, this.longitude);
    };
    /**
     * @private
     * @param {?} changes
     * @return {?}
     */
    YaMap.prototype.panTo = /**
     * @private
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes['panToObjects'] == null) {
            return;
        }
        this._mapsWrapper.panTo(this.panToObjects.points, this.panToObjects.params);
    };
    /**
     * @private
     * @return {?}
     */
    YaMap.prototype._handleMapMouseEvents = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var clickEvents = [
            { name: 'click', emitter: this.mapClick }
        ];
        /** @type {?} */
        var events = [
            { name: 'actiontick', emitter: this.actionTick }
        ];
        clickEvents.forEach(function (e) {
            /** @type {?} */
            var s = _this._mapsWrapper.subscribeToMapEvent(e.name).subscribe(function (event) {
                /** @type {?} */
                var coords = event.get('coords');
                /** @type {?} */
                var value = (/** @type {?} */ ({ lat: coords[0], lng: coords[1] }));
                e.emitter.emit(value);
            });
            _this._observableSubscriptions.push(s);
        });
        events.forEach(function (e) {
            /** @type {?} */
            var s = _this._mapsWrapper.subscribeToMapEvent(e.name).subscribe(function (event) {
                _this._mapsWrapper.getCenter().then(function (coords) {
                    _this.latitude = coords[0];
                    _this.longitude = coords[1];
                    /** @type {?} */
                    var value = (/** @type {?} */ ({ lat: coords[0], lng: coords[1] }));
                    e.emitter.emit(value);
                });
            });
            _this._observableSubscriptions.push(s);
        });
    };
    YaMap.decorators = [
        { type: Component, args: [{
                    // tslint:disable-next-line:component-selector
                    selector: 'ya-map',
                    providers: [
                        YaMapsAPIWrapper,
                        MarkerManager,
                        ClasterManager,
                        ObjectManagerManager
                    ],
                    template: "\n    <div class=\"map-container-inner\" id=\"map\" >\n      <ng-content></ng-content>\n    </div>\n  "
                }] }
    ];
    /** @nocollapse */
    YaMap.ctorParameters = function () { return [
        { type: ElementRef },
        { type: YaMapsAPIWrapper }
    ]; };
    YaMap.propDecorators = {
        longitude: [{ type: Input }],
        latitude: [{ type: Input }],
        zoom: [{ type: Input }],
        minZoom: [{ type: Input }],
        maxZoom: [{ type: Input }],
        mapType: [{ type: Input }],
        controls: [{ type: Input }],
        panToObjects: [{ type: Input }],
        mapClick: [{ type: Output }],
        actionTick: [{ type: Output }]
    };
    return YaMap;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * \@internal
 * @return {?}
 */
function coreDirectives() {
    return [
        YaMap,
        YaMarker,
        YaClaster,
        YaObjectManager
    ];
}
/**
 * The angular-ya-maps core module. Contains all Directives/Services/Pipes
 * of the core module. Please use `YaCoreModule.forRoot()` in your app module.
 */
var YaCoreModule = /** @class */ (function () {
    function YaCoreModule() {
    }
    /**
     * Please use this method when you register the module at the root level.
     */
    /**
     * Please use this method when you register the module at the root level.
     * @param {?} yaMapsAPILoaderConfig
     * @return {?}
     */
    YaCoreModule.forRoot = /**
     * Please use this method when you register the module at the root level.
     * @param {?} yaMapsAPILoaderConfig
     * @return {?}
     */
    function (yaMapsAPILoaderConfig) {
        return {
            ngModule: YaCoreModule,
            providers: __spread(BROWSER_GLOBALS_PROVIDERS, [
                { provide: YaMapsAPILoader, useClass: YaMapsAPILoader },
                { provide: LAZY_MAPS_API_CONFIG, useValue: yaMapsAPILoaderConfig }
            ]),
        };
    };
    YaCoreModule.decorators = [
        { type: NgModule, args: [{ declarations: coreDirectives(), exports: coreDirectives() },] }
    ];
    return YaCoreModule;
}());
/**
 * @param {?} yaMapsAPILoaderConfig
 * @return {?}
 */
function YaCoreModuleForRoot(yaMapsAPILoaderConfig) {
    return [
        YaCoreModule.forRoot(yaMapsAPILoaderConfig)
    ];
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

export { YamapngService, YamapngComponent, YamapngModule, coreDirectives, YaCoreModuleForRoot, YaCoreModule, yandex, YaClaster as ɵl, YaMarker as ɵk, YaObjectManager as ɵm, YaMap as ɵa, ClasterManager as ɵi, MarkerManager as ɵh, ObjectManagerManager as ɵj, LAZY_MAPS_API_CONFIG as ɵc, YaMapsAPILoader as ɵd, BROWSER_GLOBALS_PROVIDERS as ɵg, DocumentRef as ɵf, WindowRef as ɵe, YaMapsAPIWrapper as ɵb };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoieWFtYXBuZy5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8veWFtYXBuZy9saWIveWFtYXBuZy5zZXJ2aWNlLnRzIiwibmc6Ly95YW1hcG5nL2xpYi95YW1hcG5nLmNvbXBvbmVudC50cyIsIm5nOi8veWFtYXBuZy9saWIveWFtYXBuZy5tb2R1bGUudHMiLCJuZzovL3lhbWFwbmcvbGliL3V0aWxzL2Jyb3dzZXItZ2xvYmFscy50cyIsIm5nOi8veWFtYXBuZy9saWIvc2VydmljZXMveWEtbWFwcy1sb2FkZXIudHMiLCJuZzovL3lhbWFwbmcvbGliL3lhLW1hcHMtYXBpLXdyYXBwZXIudHMiLCJuZzovL3lhbWFwbmcvbGliL3NlcnZpY2VzL21hbmFnZXJzL21hcmtlci1tYW5hZ2VyLnRzIiwibmc6Ly95YW1hcG5nL2xpYi9kaXJlY3RpdmVzL21hcmtlci50cyIsIm5nOi8veWFtYXBuZy9saWIvc2VydmljZXMvbWFuYWdlcnMvY2xhc3Rlci1tYW5hZ2VyLnRzIiwibmc6Ly95YW1hcG5nL2xpYi9kaXJlY3RpdmVzL2NsYXN0ZXIudHMiLCJuZzovL3lhbWFwbmcvbGliL3NlcnZpY2VzL21hbmFnZXJzL29iamVjdE1hbmFnZXItbWFuYWdlci50cyIsIm5nOi8veWFtYXBuZy9saWIvZGlyZWN0aXZlcy9vYmplY3RNYW5hZ2VyLnRzIiwibmc6Ly95YW1hcG5nL2xpYi95YS1tYXBzLXR5cGVzLnRzIiwibmc6Ly95YW1hcG5nL2xpYi9kaXJlY3RpdmVzL3ltYXAudHMiLCJuZzovL3lhbWFwbmcvbGliL2NvcmUubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgWWFtYXBuZ1NlcnZpY2Uge1xuXG4gIGNvbnN0cnVjdG9yKCkgeyB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdsaWIteWFtYXBuZycsXG4gIHRlbXBsYXRlOiBgXG4gICAgPHA+XG4gICAgICB5YW1hcG5nIHdvcmtzIVxuICAgIDwvcD5cbiAgYCxcbiAgc3R5bGVzOiBbXVxufSlcbmV4cG9ydCBjbGFzcyBZYW1hcG5nQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBjb25zdHJ1Y3RvcigpIHsgfVxuXG4gIG5nT25Jbml0KCkge1xuICB9XG5cbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBZYW1hcG5nQ29tcG9uZW50IH0gZnJvbSAnLi95YW1hcG5nLmNvbXBvbmVudCc7XG5cbkBOZ01vZHVsZSh7XG4gIGRlY2xhcmF0aW9uczogW1lhbWFwbmdDb21wb25lbnRdLFxuICBpbXBvcnRzOiBbXG4gIF0sXG4gIGV4cG9ydHM6IFtZYW1hcG5nQ29tcG9uZW50XVxufSlcbmV4cG9ydCBjbGFzcyBZYW1hcG5nTW9kdWxlIHsgfVxuIiwiaW1wb3J0IHsgUHJvdmlkZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuZXhwb3J0IGNsYXNzIFdpbmRvd1JlZiB7XG4gIHB1YmxpYyBnZXROYXRpdmVXaW5kb3coKTogYW55IHsgcmV0dXJuIHdpbmRvdzsgfVxufVxuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBEb2N1bWVudFJlZiB7XG5cbiAgcHVibGljIGdldE5hdGl2ZURvY3VtZW50KCk6IGFueSB7XG4gICAgcmV0dXJuIGRvY3VtZW50O1xuICB9XG5cbn1cblxuZXhwb3J0IGNvbnN0IEJST1dTRVJfR0xPQkFMU19QUk9WSURFUlM6IFByb3ZpZGVyW10gPSBbV2luZG93UmVmLCBEb2N1bWVudFJlZl07XG4iLCJpbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIEluamVjdGlvblRva2VuLCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRG9jdW1lbnRSZWYsIFdpbmRvd1JlZiB9IGZyb20gJy4vLi4vdXRpbHMvYnJvd3Nlci1nbG9iYWxzJztcblxuLyoqXG4gKiBUb2tlbiBmb3IgdGhlIGNvbmZpZyBvZiB0aGUgWWFNYXBzQVBJTG9hZGVyQ29uZmlnTGl0ZXJhbC4gUGxlYXNlIHByb3ZpZGUgYW4gb2JqZWN0IG9mIHR5cGUge0BsaW5rXG4gICogWWFNYXBzQVBJTG9hZGVyQ29uZmlnTGl0ZXJhbH0uXG4gICovXG4gZXhwb3J0IGNvbnN0IExBWllfTUFQU19BUElfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPFlhTWFwc0FQSUxvYWRlckNvbmZpZ0xpdGVyYWw+KCdhbmd1bGFyLXlhLW1hcHMgTUFQU19BUElfQ09ORklHJyk7XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBmb3IgdGhlIHtAbGluayBMYXp5TWFwc0FQSUxvYWRlcn0uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgWWFNYXBzQVBJTG9hZGVyQ29uZmlnTGl0ZXJhbCB7XG4gIC8qKlxuICAgKiBBUEkgS2V5LlxuICAgKi9cbiAgYXBpS2V5Pzogc3RyaW5nO1xufVxuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgWWFNYXBzQVBJTG9hZGVyIHtcbiAgICBwcml2YXRlIF9zY3JpcHRMb2FkaW5nUHJvbWlzZTogUHJvbWlzZTx2b2lkPjtcbiAgICBwcml2YXRlIGNvbmZpZzogWWFNYXBzQVBJTG9hZGVyQ29uZmlnTGl0ZXJhbDtcbiAgICBwcml2YXRlIF93aW5kb3dSZWY6IFdpbmRvd1JlZjtcbiAgICBwcml2YXRlIF9kb2N1bWVudFJlZjogRG9jdW1lbnRSZWY7XG5cbiAgICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBASW5qZWN0KExBWllfTUFQU19BUElfQ09ORklHKSBjb25maWc6IGFueSA9IG51bGwsIHc6IFdpbmRvd1JlZiwgZDogRG9jdW1lbnRSZWYpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuX3dpbmRvd1JlZiA9IHc7XG4gICAgICAgIHRoaXMuX2RvY3VtZW50UmVmID0gZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgbG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2NyaXB0ID0gdGhpcy5fZG9jdW1lbnRSZWYuZ2V0TmF0aXZlRG9jdW1lbnQoKS5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICAgICAgc2NyaXB0LmFzeW5jID0gZmFsc2U7XG4gICAgICAgIHNjcmlwdC5kZWZlciA9IHRydWU7XG4gICAgICAgIHNjcmlwdC5pZCA9ICdZYVNjcmlwdCc7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTmFtZSA9IGBhbmd1bGFyMllBTWFwc0FQSUxvYWRlcmA7XG4gICAgICAgIHNjcmlwdC5zcmMgPSBgaHR0cHM6Ly9hcGktbWFwcy55YW5kZXgucnUvMi4xLz9hcGlrZXk9JHt0aGlzLmNvbmZpZy5hcGlLZXl9Jmxhbmc9cnVfUlVgO1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6YmFuLXR5cGVzXG4gICAgICAgIHRoaXMuX3NjcmlwdExvYWRpbmdQcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmU6IEZ1bmN0aW9uLCByZWplY3Q6IEZ1bmN0aW9uKSA9PiB7XG4gICAgICAgICAgICBzY3JpcHQub25sb2FkID0gKCkgPT4geyByZXNvbHZlKCk7IH07XG4gICAgICAgICAgICBzY3JpcHQub25lcnJvciA9IChlcnJvcjogRXZlbnQpID0+IHsgcmVqZWN0KCk7IH07XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9kb2N1bWVudFJlZi5nZXROYXRpdmVEb2N1bWVudCgpLmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjcmlwdExvYWRpbmdQcm9taXNlO1xuICAgIH1cblxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSwgTmdab25lIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBPYnNlcnZlciB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgKiBhcyBtYXBUeXBlcyBmcm9tICcuL3lhLW1hcHMtdHlwZXMnO1xuaW1wb3J0IHsgWWFNYXBzQVBJTG9hZGVyIH0gZnJvbSAnLi9zZXJ2aWNlcy95YS1tYXBzLWxvYWRlcic7XG5pbXBvcnQgeyBZYU1hcmtlciB9IGZyb20gJy4vZGlyZWN0aXZlcy9tYXJrZXInO1xuaW1wb3J0IHsgWWFDbGFzdGVyIH0gZnJvbSAnLi9kaXJlY3RpdmVzL2NsYXN0ZXInO1xuaW1wb3J0IHsgWWFPYmplY3RNYW5hZ2VyIH0gZnJvbSAnLi9kaXJlY3RpdmVzL29iamVjdE1hbmFnZXInO1xuaW1wb3J0IHsgRG9jdW1lbnRSZWYsIFdpbmRvd1JlZiB9IGZyb20gJy4vdXRpbHMvYnJvd3Nlci1nbG9iYWxzJztcblxuZGVjbGFyZSB2YXIgeW1hcHM6IGFueTtcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFlhTWFwc0FQSVdyYXBwZXIge1xuICAgIHByaXZhdGUgX21hcDogUHJvbWlzZTxtYXBUeXBlcy5ZYW5kZXhNYXA+O1xuICAgIHByaXZhdGUgX21hcFJlc29sdmVyOiAodmFsdWU/OiBtYXBUeXBlcy5ZYW5kZXhNYXApID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSBfZG9jdW1lbnRSZWY6IERvY3VtZW50UmVmO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfbG9hZGVyOiBZYU1hcHNBUElMb2FkZXIsIHByaXZhdGUgX3pvbmU6IE5nWm9uZSwgZDogRG9jdW1lbnRSZWYpIHtcbiAgICAgICAgdGhpcy5fZG9jdW1lbnRSZWYgPSBkO1xuICAgICAgICB0aGlzLl9tYXAgPSBuZXcgUHJvbWlzZTxtYXBUeXBlcy5ZYW5kZXhNYXA+KChyZXNvbHZlOiAoKSA9PiB2b2lkKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9tYXBSZXNvbHZlciA9IHJlc29sdmU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhdGVNYXAoZWw6IEhUTUxFbGVtZW50LCBtYXBPcHRpb25zOiBtYXBUeXBlcy5NYXBPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMuX2xvYWRlci5sb2FkKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjcmVhdGUgPSAoKSA9PiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoeW1hcHMuTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcCA9IG5ldyB5bWFwcy5NYXAoZWwsIG1hcE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXBSZXNvbHZlcihtYXAgYXMgbWFwVHlwZXMuWWFuZGV4TWFwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgY3JlYXRlKCk7XG4gICAgICAgIH0pLmNhdGNoKChlKSA9PiBjb25zb2xlLmxvZyhlKSk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgcHVibGljIHNldENlbnRlcihsYXRpdHVkZTogbnVtYmVyLCBsb25naXR1ZGU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9tYXAudGhlbigobWFwOiBtYXBUeXBlcy5ZYW5kZXhNYXApID0+IHtcbiAgICAgICAgICAgIG1hcC5zZXRDZW50ZXIoW2xhdGl0dWRlLCBsb25naXR1ZGVdKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldENlbnRlcigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC50aGVuKChtYXA6IG1hcFR5cGVzLllhbmRleE1hcCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG1hcC5nZXRDZW50ZXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHBhblRvKHBvaW50czogYW55W10sIG9wdGlvbnM6IGFueVtdKSB7XG4gICAgICAgIHRoaXMuX21hcC50aGVuKChtYXA6IG1hcFR5cGVzLllhbmRleE1hcCkgPT4ge1xuICAgICAgICAgICAgbWFwLnBhblRvKHBvaW50cywgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdWJzY3JpYmVUb01hcEV2ZW50PEU+KGV2ZW50TmFtZTogc3RyaW5nKTogT2JzZXJ2YWJsZTxFPiB7XG4gICAgICAgIHJldHVybiBPYnNlcnZhYmxlLmNyZWF0ZSgob2JzZXJ2ZXI6IE9ic2VydmVyPEU+KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9tYXAudGhlbigobTogbWFwVHlwZXMuWWFuZGV4TWFwKSA9PiB7XG4gICAgICAgICAgICAgICAgbS5ldmVudHMuYWRkKGV2ZW50TmFtZSwgKGFyZzogRSkgPT4geyB0aGlzLl96b25lLnJ1bigoKSA9PiBvYnNlcnZlci5uZXh0KGFyZykpOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlTWFya2VyKG1hcmtlcjogWWFNYXJrZXIpOiBQcm9taXNlPG1hcFR5cGVzLk1hcmtlcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLnRoZW4oKG1hcDogbWFwVHlwZXMuWWFuZGV4TWFwKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtID0gbmV3IHltYXBzLlBsYWNlbWFyayhbbWFya2VyLmxhdGl0dWRlLCBtYXJrZXIubG9uZ2l0dWRlXSwge1xuICAgICAgICAgICAgICAgIGJhbGxvb25Db250ZW50SGVhZGVyOiBtYXJrZXIuYmFsbG9vbkNvbnRlbnRIZWFkZXIsXG4gICAgICAgICAgICAgICAgYmFsbG9vbkNvbnRlbnRCb2R5OiBtYXJrZXIuYmFsbG9vbkNvbnRlbnRCb2R5LFxuICAgICAgICAgICAgICAgIGJhbGxvb25Db250ZW50Rm9vdGVyOiBtYXJrZXIuYmFsbG9vbkNvbnRlbnRGb290ZXIsXG4gICAgICAgICAgICAgICAgaWNvbkNvbnRlbnQ6IG1hcmtlci5pY29uQ29udGVudFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogbWFya2VyLmRyYWdnYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgcHJlc2V0OiBtYXJrZXIucHJlc2V0LFxuICAgICAgICAgICAgICAgICAgICBpY29uTGF5b3V0OiBtYXJrZXIuaWNvbkxheW91dCxcbiAgICAgICAgICAgICAgICAgICAgaWNvbkltYWdlSHJlZjogbWFya2VyLmljb25JbWFnZUhyZWYsXG4gICAgICAgICAgICAgICAgICAgIGljb25JbWFnZVNpemU6IG1hcmtlci5pY29uSW1hZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICBpY29uSW1hZ2VPZmZzZXQ6IG1hcmtlci5pY29uSW1hZ2VPZmZzZXRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1hcC5nZW9PYmplY3RzLmFkZChtKTtcbiAgICAgICAgICAgIHJldHVybiBtO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlR2VvKG92ZXJsYXk6IGFueSkge1xuICAgICAgICB0aGlzLl9tYXAudGhlbigobWFwOiBtYXBUeXBlcy5ZYW5kZXhNYXApID0+IHtcbiAgICAgICAgICAgIG1hcC5nZW9PYmplY3RzLnJlbW92ZShvdmVybGF5KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZUNsYXN0ZXIoY2xhc3RlcjogWWFDbGFzdGVyKTogUHJvbWlzZTxtYXBUeXBlcy5DbGFzdGVyPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAudGhlbigobWFwOiBtYXBUeXBlcy5ZYW5kZXhNYXApID0+IHtcbiAgICAgICAgICAgIGlmIChjbGFzdGVyLm1hcmtlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgbXlHZW9PYmplY3RzOiBhbnlbXTtcbiAgICAgICAgICAgIG15R2VvT2JqZWN0cyA9IG5ldyBBcnJheTxhbnk+KCk7XG4gICAgICAgICAgICBjbGFzdGVyLm1hcmtlcnMuZm9yRWFjaCgoeDogbWFwVHlwZXMuTWFya2VyQ2xhc3RlcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gbmV3IHltYXBzLkdlb09iamVjdCh7XG4gICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5OiB7IHR5cGU6IHgudHlwZSwgY29vcmRpbmF0ZXM6IFt4LmxhdCwgeC5sbmddIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBteUdlb09iamVjdHMucHVzaChwb2ludCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgY2x1c3RlcmVyID0gbmV3IHltYXBzLkNsdXN0ZXJlcih7fSk7XG4gICAgICAgICAgICBjbHVzdGVyZXIuYWRkKG15R2VvT2JqZWN0cyk7XG4gICAgICAgICAgICBtYXAuZ2VvT2JqZWN0cy5hZGQoY2x1c3RlcmVyKTtcblxuICAgICAgICAgICAgcmV0dXJuIGNsdXN0ZXJlcjtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlT2JqZWN0TWFuYWdlcihvYmplY3RNYW5hZ2VyOiBZYU9iamVjdE1hbmFnZXIpOiBhbnkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLnRoZW4oKG1hcDogbWFwVHlwZXMuWWFuZGV4TWFwKSA9PiB7XG5cbiAgICAgICAgICAgIGlmIChvYmplY3RNYW5hZ2VyLmRhdGFzb3VyY2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBuYXRpdmVPYmplY3RNYW5hZ2VyID0gbmV3IHltYXBzLk9iamVjdE1hbmFnZXIoe1xuICAgICAgICAgICAgICAgIGNsdXN0ZXJpemU6IG9iamVjdE1hbmFnZXIuY2x1c3Rlcml6ZSxcbiAgICAgICAgICAgICAgICBncmlkU2l6ZTogb2JqZWN0TWFuYWdlci5ncmlkU2l6ZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG5hdGl2ZU9iamVjdE1hbmFnZXIuYWRkKG9iamVjdE1hbmFnZXIuZGF0YXNvdXJjZSk7XG5cbiAgICAgICAgICAgIG5hdGl2ZU9iamVjdE1hbmFnZXIub2JqZWN0cy5vcHRpb25zLnNldCgncHJlc2V0Jywgb2JqZWN0TWFuYWdlci5vYmplY3RQcmVzZXQpO1xuICAgICAgICAgICAgbmF0aXZlT2JqZWN0TWFuYWdlci5jbHVzdGVycy5vcHRpb25zLnNldCgncHJlc2V0Jywgb2JqZWN0TWFuYWdlci5jbGFzdGVyUHJlc2V0KTtcbiAgICAgICAgICAgIG1hcC5nZW9PYmplY3RzLmFkZChuYXRpdmVPYmplY3RNYW5hZ2VyKTtcbiAgICAgICAgICAgIHJldHVybiBuYXRpdmVPYmplY3RNYW5hZ2VyO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbmF2aWdhdGVUb0dlb09iamVjdChvYmplY3RNYW5hZ2VyOiBhbnksIGlkOiBhbnkpIHtcbiAgICAgICAgY29uc3Qgb2JqID0gb2JqZWN0TWFuYWdlci5vYmplY3RzLmdldEJ5SWQoaWQpO1xuICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICB0aGlzLnNldENlbnRlcihvYmouZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0sIG9iai5nZW9tZXRyeS5jb29yZGluYXRlc1sxXSk7XG4gICAgICAgICAgICBvYmplY3RNYW5hZ2VyLm9iamVjdHMuYmFsbG9vbi5vcGVuKGlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBjaGVja1lhU2NpcHRMb2FkZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kb2N1bWVudFJlZi5nZXROYXRpdmVEb2N1bWVudCgpLmdldEVsZW1lbnRCeUlkKCdZYVNjcmlwdCcpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvYmplY3RNYW5hZ2VyU2V0RmlsdGVyKG9iamVjdE1hbmFnZXI6IGFueSwgZmlsdGVyOiBhbnkpIHtcbiAgICAgICAgb2JqZWN0TWFuYWdlci5zZXRGaWx0ZXIoZmlsdGVyKTtcbiAgICB9XG5cbn1cbiIsImltcG9ydCB7IEluamVjdGFibGUsIE5nWm9uZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgT2JzZXJ2ZXIgfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgWWFNYXJrZXIgfSBmcm9tICcuLy4uLy4uL2RpcmVjdGl2ZXMvbWFya2VyJztcblxuaW1wb3J0IHsgWWFNYXBzQVBJV3JhcHBlciB9IGZyb20gJy4uLy4uL3lhLW1hcHMtYXBpLXdyYXBwZXInO1xuaW1wb3J0IHsgTWFya2VyIH0gZnJvbSAnLi4vLi4veWEtbWFwcy10eXBlcyc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBNYXJrZXJNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBfbWFya2VyczogTWFwPFlhTWFya2VyLCBQcm9taXNlPE1hcmtlcj4+ID1cbiAgbmV3IE1hcDxZYU1hcmtlciwgUHJvbWlzZTxNYXJrZXI+PigpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX21hcHNXcmFwcGVyOiBZYU1hcHNBUElXcmFwcGVyLCBwcml2YXRlIF96b25lOiBOZ1pvbmUpIHsgfVxuXG4gIHB1YmxpYyBkZWxldGVNYXJrZXIobWFya2VyOiBZYU1hcmtlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG0gPSB0aGlzLl9tYXJrZXJzLmdldChtYXJrZXIpO1xuICAgIGlmIChtID09IG51bGwpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXNoYWRvd2VkLXZhcmlhYmxlXG4gICAgcmV0dXJuIG0udGhlbigobTogTWFya2VyKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fem9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tc2hhZG93ZWQtdmFyaWFibGVcbiAgICAgICAgdGhpcy5nZXROYXRpdmVNYXJrZXIobWFya2VyKS50aGVuKChtOiBNYXJrZXIpID0+IHtcbiAgICAgICAgICB0aGlzLl9tYXBzV3JhcHBlci5yZW1vdmVHZW8obSk7XG4gICAgICAgICAgdGhpcy5fbWFya2Vycy5kZWxldGUobWFya2VyKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRNYXJrZXIobWFya2VyOiBZYU1hcmtlcikge1xuICAgIGNvbnN0IG1hcmtlclByb21pc2UgPSB0aGlzLl9tYXBzV3JhcHBlci5jcmVhdGVNYXJrZXIobWFya2VyKTtcbiAgICB0aGlzLl9tYXJrZXJzLnNldChtYXJrZXIsIG1hcmtlclByb21pc2UpO1xuICB9XG5cbiAgcHVibGljIHNob3dCYWxsb29uKG1hcmtlcjogWWFNYXJrZXIpIHtcbiAgICB0aGlzLmdldE5hdGl2ZU1hcmtlcihtYXJrZXIpLnRoZW4oKG06IE1hcmtlcikgPT4ge1xuICAgICAgbS5iYWxsb29uLm9wZW4oKTtcbiAgICB9KTtcblxuICB9XG5cbiAgcHVibGljIGdldE5hdGl2ZU1hcmtlcihtYXJrZXI6IFlhTWFya2VyKTogUHJvbWlzZTxNYXJrZXI+IHtcbiAgICByZXR1cm4gdGhpcy5fbWFya2Vycy5nZXQobWFya2VyKTtcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGVFdmVudE9ic2VydmFibGU8VD4oZXZlbnROYW1lOiBzdHJpbmcsIG1hcmtlcjogWWFNYXJrZXIpOiBPYnNlcnZhYmxlPFQ+IHtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZS5jcmVhdGUoKG9ic2VydmVyOiBPYnNlcnZlcjxUPikgPT4ge1xuICAgICAgdGhpcy5fbWFya2Vycy5nZXQobWFya2VyKS50aGVuKChtOiBNYXJrZXIpID0+IHtcbiAgICAgICAgbS5ldmVudHMuYWRkKGV2ZW50TmFtZSwgKGU6IFQpID0+IHRoaXMuX3pvbmUucnVuKCgpID0+IG9ic2VydmVyLm5leHQoZSkpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBEaXJlY3RpdmUsIEV2ZW50RW1pdHRlciwgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIFNpbXBsZUNoYW5nZSwgSW5wdXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBZYU1hcHNBUElXcmFwcGVyIH0gZnJvbSAnLi4veWEtbWFwcy1hcGktd3JhcHBlcic7XG5pbXBvcnQgKiBhcyBtYXBUeXBlcyBmcm9tICcuLi95YS1tYXBzLXR5cGVzJztcbmltcG9ydCB7IE1hcmtlck1hbmFnZXIgfSBmcm9tICcuLi9zZXJ2aWNlcy9tYW5hZ2Vycy9tYXJrZXItbWFuYWdlcic7XG5pbXBvcnQgeyBNYXJrZXIgfSBmcm9tICcuLi95YS1tYXBzLXR5cGVzJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuXG5sZXQgbWFya2VySWQgPSAwO1xuXG5ARGlyZWN0aXZlKHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmRpcmVjdGl2ZS1zZWxlY3RvclxuICBzZWxlY3RvcjogJ3lhLW1hcmtlcicsXG4gIHByb3ZpZGVyczogW1xuICAgIFlhTWFwc0FQSVdyYXBwZXJcbiAgXVxufSlcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmRpcmVjdGl2ZS1jbGFzcy1zdWZmaXhcbmV4cG9ydCBjbGFzcyBZYU1hcmtlciBpbXBsZW1lbnRzIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcbiAgQElucHV0KCkgcHVibGljIGxhdGl0dWRlOiBudW1iZXI7XG4gIEBJbnB1dCgpIHB1YmxpYyBsb25naXR1ZGU6IG51bWJlcjtcbiAgQElucHV0KCkgcHVibGljIGJhbGxvb25MYXlvdXQ6IGFueTtcbiAgQElucHV0KCkgcHVibGljIGJhbGxvb25Db250ZW50SGVhZGVyOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHB1YmxpYyBiYWxsb29uQ29udGVudEJvZHk6IHN0cmluZztcbiAgQElucHV0KCkgcHVibGljIGJhbGxvb25Db250ZW50Rm9vdGVyOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHB1YmxpYyBkcmFnZ2FibGUgPSBmYWxzZTtcbiAgQElucHV0KCkgcHVibGljIHByZXNldCA9ICdpc2xhbmRzI2JsdWVJY29uJztcbiAgQElucHV0KCkgcHVibGljIGljb25Db250ZW50OiBzdHJpbmc7XG4gIEBJbnB1dCgpIHB1YmxpYyBzaG93SW5mbzogYm9vbGVhbjtcbiAgLy8gZGVmYXVsdCNpbWFnZVxuICBASW5wdXQoKSBwdWJsaWMgaWNvbkxheW91dDogYW55O1xuICBASW5wdXQoKSBwdWJsaWMgaWNvbkltYWdlSHJlZjogYW55O1xuICAvLyBbMzAsIDQyXVxuICBASW5wdXQoKSBwdWJsaWMgaWNvbkltYWdlU2l6ZTogYW55O1xuICAvLyBbLTUsIC0zOF1cbiAgQElucHV0KCkgcHVibGljIGljb25JbWFnZU9mZnNldDogYW55O1xuXG4gIEBPdXRwdXQoKSBwdWJsaWMgbWFya2VyQ2xpY2s6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuICBAT3V0cHV0KCkgcHVibGljIGRyYWdFbmQ6IEV2ZW50RW1pdHRlcjxtYXBUeXBlcy5NYXBNb3VzZUV2ZW50PiA9IG5ldyBFdmVudEVtaXR0ZXI8bWFwVHlwZXMuTWFwTW91c2VFdmVudD4oKTtcblxuICBwcml2YXRlIF9tYXJrZXJBZGRlZFRvTWFuZ2VyID0gZmFsc2U7XG4gIHByaXZhdGUgX2lkOiBzdHJpbmc7XG4gIHByaXZhdGUgX29ic2VydmFibGVTdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX21hcmtlck1hbmFnZXI6IE1hcmtlck1hbmFnZXIpIHtcbiAgICB0aGlzLl9pZCA9IChtYXJrZXJJZCsrKS50b1N0cmluZygpO1xuICB9XG5cbiAgcHVibGljIG5nT25DaGFuZ2VzKGNoYW5nZXM6IHsgW2tleTogc3RyaW5nXTogU2ltcGxlQ2hhbmdlIH0pIHtcbiAgICBpZiAoIXRoaXMuX21hcmtlckFkZGVkVG9NYW5nZXIpIHtcblxuICAgICAgdGhpcy5fbWFya2VyTWFuYWdlci5hZGRNYXJrZXIodGhpcyk7XG4gICAgICB0aGlzLl9tYXJrZXJBZGRlZFRvTWFuZ2VyID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzWydzaG93SW5mbyddKSB7XG4gICAgICB0aGlzLl9tYXJrZXJNYW5hZ2VyLnNob3dCYWxsb29uKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLl9tYXJrZXJNYW5hZ2VyLmRlbGV0ZU1hcmtlcih0aGlzKTtcbiAgICB0aGlzLl9vYnNlcnZhYmxlU3Vic2NyaXB0aW9ucy5mb3JFYWNoKChzKSA9PiBzLnVuc3Vic2NyaWJlKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gY2xpY2sgZXZlbnRcbiAgICBjb25zdCBjcyA9IHRoaXMuX21hcmtlck1hbmFnZXIuY3JlYXRlRXZlbnRPYnNlcnZhYmxlKCdjbGljaycsIHRoaXMpLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICB0aGlzLl9tYXJrZXJNYW5hZ2VyLnNob3dCYWxsb29uKHRoaXMpO1xuICAgICAgdGhpcy5tYXJrZXJDbGljay5lbWl0KG51bGwpO1xuICAgIH0pO1xuICAgIHRoaXMuX29ic2VydmFibGVTdWJzY3JpcHRpb25zLnB1c2goY3MpO1xuICAgIC8vIGRyYWdlbmQgZXZlbnRcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXG4gICAgY29uc3QgZHMgPSB0aGlzLl9tYXJrZXJNYW5hZ2VyLmNyZWF0ZUV2ZW50T2JzZXJ2YWJsZTxtYXBUeXBlcy5Nb3VzZUV2ZW50PignZHJhZ2VuZCcsIHRoaXMpLnN1YnNjcmliZSgoZTogbWFwVHlwZXMuTW91c2VFdmVudCkgPT4ge1xuXG4gICAgICBjb25zdCB0aGlzUGxhY2VtYXJrID0gZS5nZXQoJ3RhcmdldCcpO1xuICAgICAgY29uc3QgY29vcmRzID0gdGhpc1BsYWNlbWFyay5nZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgdGhpcy5fbWFya2VyTWFuYWdlci5nZXROYXRpdmVNYXJrZXIodGhpcykudGhlbigobTogTWFya2VyKSA9PiB7XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcbiAgICAgICAgdGhpcy5kcmFnRW5kLmVtaXQoeyBsYXQ6IGNvb3Jkc1swXSwgbG5nOiBjb29yZHNbMV0sIG5hdGl2ZU1hcmtlcjogbSB9IGFzIG1hcFR5cGVzLk1hcE1vdXNlRXZlbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fb2JzZXJ2YWJsZVN1YnNjcmlwdGlvbnMucHVzaChkcyk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEluamVjdGFibGUsIE5nWm9uZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgT2JzZXJ2ZXIgfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgWWFDbGFzdGVyIH0gZnJvbSAnLi8uLi8uLi9kaXJlY3RpdmVzL2NsYXN0ZXInO1xuaW1wb3J0IHsgWWFNYXBzQVBJV3JhcHBlciB9IGZyb20gJy4uLy4uL3lhLW1hcHMtYXBpLXdyYXBwZXInO1xuaW1wb3J0IHsgTWFya2VyQ2xhc3RlciwgQ2xhc3RlciB9IGZyb20gJy4uLy4uL3lhLW1hcHMtdHlwZXMnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQ2xhc3Rlck1hbmFnZXIge1xuICBwcml2YXRlIF9jbGFzdGVyczogTWFwPFlhQ2xhc3RlciwgUHJvbWlzZTxDbGFzdGVyPj4gPVxuICBuZXcgTWFwPFlhQ2xhc3RlciwgUHJvbWlzZTxDbGFzdGVyPj4oKTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9tYXBzV3JhcHBlcjogWWFNYXBzQVBJV3JhcHBlciwgcHJpdmF0ZSBfem9uZTogTmdab25lKSB7IH1cblxuICBwdWJsaWMgYWRkQ2xhc3RlcihjbGFzdGVyOiBZYUNsYXN0ZXIpIHtcbiAgICBjb25zdCBjbGFzdGVyUHJvbWlzZSA9IHRoaXMuX21hcHNXcmFwcGVyLmNyZWF0ZUNsYXN0ZXIoY2xhc3Rlcik7XG4gICAgdGhpcy5fY2xhc3RlcnMuc2V0KGNsYXN0ZXIsIGNsYXN0ZXJQcm9taXNlKTtcbiAgfVxuXG4gIC8qIGdldE5hdGl2ZU1hcmtlcihtYXJrZXI6IFlhTWFya2VyKTogUHJvbWlzZTxNYXJrZXI+IHtcbiAgICAgcmV0dXJuIHRoaXMuX21hcmtlcnMuZ2V0KG1hcmtlcik7XG4gICB9XG4gICBjcmVhdGVFdmVudE9ic2VydmFibGU8VD4oZXZlbnROYW1lOiBzdHJpbmcsIG1hcmtlcjogWWFNYXJrZXIpOiBPYnNlcnZhYmxlPFQ+IHtcbiAgICAgcmV0dXJuIE9ic2VydmFibGUuY3JlYXRlKChvYnNlcnZlcjogT2JzZXJ2ZXI8VD4pID0+IHtcbiAgICAgICB0aGlzLl9tYXJrZXJzLmdldChtYXJrZXIpLnRoZW4oKG06IE1hcmtlcikgPT4ge1xuICAgICAgICAgbS5ldmVudHMuYWRkKGV2ZW50TmFtZSwgKGU6IFQpID0+IHRoaXMuX3pvbmUucnVuKCgpID0+IG9ic2VydmVyLm5leHQoZSkpKTtcbiAgICAgICB9KTtcbiAgICAgfSk7XG4gICB9XG4gICAqL1xufVxuIiwiaW1wb3J0IHtcbiAgRGlyZWN0aXZlLFxuICBFdmVudEVtaXR0ZXIsXG4gIE9uQ2hhbmdlcyxcbiAgT25EZXN0cm95LFxuICBTaW1wbGVDaGFuZ2UsXG4gIEFmdGVyQ29udGVudEluaXQsXG4gIENvbnRlbnRDaGlsZHJlbixcbiAgUXVlcnlMaXN0LFxuICBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBZYU1hcHNBUElXcmFwcGVyIH0gZnJvbSAnLi4veWEtbWFwcy1hcGktd3JhcHBlcic7XG5pbXBvcnQgKiBhcyBtYXBUeXBlcyBmcm9tICcuLi95YS1tYXBzLXR5cGVzJztcbmltcG9ydCB7IENsYXN0ZXJNYW5hZ2VyIH0gZnJvbSAnLi4vc2VydmljZXMvbWFuYWdlcnMvY2xhc3Rlci1tYW5hZ2VyJztcbmltcG9ydCB7IENsYXN0ZXIsIE1hcmtlckNsYXN0ZXIgfSBmcm9tICcuLi95YS1tYXBzLXR5cGVzJztcblxubGV0IGNsYXN0ZXJJZCA9IDA7XG5cbkBEaXJlY3RpdmUoe1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpkaXJlY3RpdmUtc2VsZWN0b3JcbiAgICBzZWxlY3RvcjogJ3lhLWNsYXN0ZXInLFxuICAgIHByb3ZpZGVyczogW1xuICAgICAgICBZYU1hcHNBUElXcmFwcGVyXG4gICAgXVxufSlcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmRpcmVjdGl2ZS1jbGFzcy1zdWZmaXhcbmV4cG9ydCBjbGFzcyBZYUNsYXN0ZXIgaW1wbGVtZW50cyBPbkNoYW5nZXMsIE9uRGVzdHJveSB7XG4gICAgQElucHV0KCkgcHVibGljIG1hcmtlcnM6IGFueVtdO1xuXG4gICAgcHJpdmF0ZSBfaWQ6IHN0cmluZztcbiAgICBwcml2YXRlIF9tYXJrZXJBZGRlZFRvTWFuZ2VyID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9jbGFzdGVyTWFuYWdlcjogQ2xhc3Rlck1hbmFnZXIpIHtcbiAgICAgICAgdGhpcy5faWQgPSAoY2xhc3RlcklkKyspLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgcHVibGljIG5nT25DaGFuZ2VzKGNoYW5nZXM6IHsgW2tleTogc3RyaW5nXTogU2ltcGxlQ2hhbmdlIH0pIHtcbiAgICAgICAgaWYgKCF0aGlzLl9tYXJrZXJBZGRlZFRvTWFuZ2VyKSB7XG4gICAgICAgICAgICB0aGlzLl9jbGFzdGVyTWFuYWdlci5hZGRDbGFzdGVyKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG5nT25EZXN0cm95KCkgeyB9XG5cbiAgICBwcml2YXRlIF9hZGRFdmVudExpc3RlbmVycygpIHsgfVxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSwgTmdab25lIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBPYnNlcnZlciB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBZYU9iamVjdE1hbmFnZXIgfSBmcm9tICcuLy4uLy4uL2RpcmVjdGl2ZXMvb2JqZWN0TWFuYWdlcic7XG5pbXBvcnQgeyBZYU1hcHNBUElXcmFwcGVyIH0gZnJvbSAnLi4vLi4veWEtbWFwcy1hcGktd3JhcHBlcic7XG5pbXBvcnQgeyBPYmplY3RNYW5hZ2VyIH0gZnJvbSAnLi4vLi4veWEtbWFwcy10eXBlcyc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBPYmplY3RNYW5hZ2VyTWFuYWdlciB7XG4gIHByaXZhdGUgX21hbmFnZXJzOiBNYXA8WWFPYmplY3RNYW5hZ2VyLCBQcm9taXNlPE9iamVjdE1hbmFnZXI+PiA9XG4gIG5ldyBNYXA8WWFPYmplY3RNYW5hZ2VyLCBQcm9taXNlPE9iamVjdE1hbmFnZXI+PigpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX21hcHNXcmFwcGVyOiBZYU1hcHNBUElXcmFwcGVyLCBwcml2YXRlIF96b25lOiBOZ1pvbmUpIHsgfVxuXG4gIHB1YmxpYyBhZGQobWFuYWdlcjogWWFPYmplY3RNYW5hZ2VyKSB7XG4gICAgY29uc3QgbWFuYWdlclByb21pc2UgPSB0aGlzLl9tYXBzV3JhcHBlci5jcmVhdGVPYmplY3RNYW5hZ2VyKG1hbmFnZXIpO1xuICAgIHRoaXMuX21hbmFnZXJzLnNldChtYW5hZ2VyLCBtYW5hZ2VyUHJvbWlzZSk7XG4gIH1cblxuICBwdWJsaWMgbmF2aWdhdGVUb0dlb09iamVjdChtYW5hZ2VyOiBZYU9iamVjdE1hbmFnZXIsIGlkOiBudW1iZXIpIHtcbiAgICB0aGlzLmdldE5hdGl2ZU1hbmFnZXIobWFuYWdlcikudGhlbigocDogYW55KSA9PiB7XG4gICAgICB0aGlzLl9tYXBzV3JhcHBlci5uYXZpZ2F0ZVRvR2VvT2JqZWN0KHAsIGlkKTtcbiAgICB9KTtcblxuICB9XG5cbiAgcHVibGljIGdldE5hdGl2ZU1hbmFnZXIobWFuYWdlcjogWWFPYmplY3RNYW5hZ2VyKTogUHJvbWlzZTxPYmplY3RNYW5hZ2VyPiB7XG4gICAgcmV0dXJuIHRoaXMuX21hbmFnZXJzLmdldChtYW5hZ2VyKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRGaWx0ZXIobWFuYWdlcjogWWFPYmplY3RNYW5hZ2VyLCBmaWx0ZXI6IGFueSkge1xuICAgIHRoaXMuZ2V0TmF0aXZlTWFuYWdlcihtYW5hZ2VyKS50aGVuKChwOiBhbnkpID0+IHtcbiAgICAgIHRoaXMuX21hcHNXcmFwcGVyLm9iamVjdE1hbmFnZXJTZXRGaWx0ZXIocCwgZmlsdGVyKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgRGlyZWN0aXZlLCBFdmVudEVtaXR0ZXIsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBTaW1wbGVDaGFuZ2UsXG4gIEFmdGVyQ29udGVudEluaXQsIENvbnRlbnRDaGlsZHJlbiwgUXVlcnlMaXN0LCBJbnB1dFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBZYU1hcHNBUElXcmFwcGVyIH0gZnJvbSAnLi4veWEtbWFwcy1hcGktd3JhcHBlcic7XG5pbXBvcnQgKiBhcyBtYXBUeXBlcyBmcm9tICcuLi95YS1tYXBzLXR5cGVzJztcbmltcG9ydCB7IE9iamVjdE1hbmFnZXJNYW5hZ2VyIH0gZnJvbSAnLi4vc2VydmljZXMvbWFuYWdlcnMvb2JqZWN0TWFuYWdlci1tYW5hZ2VyJztcblxubGV0IG1hcmtlcklkID0gMDtcblxuQERpcmVjdGl2ZSh7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpkaXJlY3RpdmUtc2VsZWN0b3JcbiAgc2VsZWN0b3I6ICd5YS1vYmplY3QtbWFuYWdlcicsXG4gIHByb3ZpZGVyczogW1xuICAgIFlhTWFwc0FQSVdyYXBwZXJcbiAgXVxufSlcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmRpcmVjdGl2ZS1jbGFzcy1zdWZmaXhcbmV4cG9ydCBjbGFzcyBZYU9iamVjdE1hbmFnZXIgaW1wbGVtZW50cyBPbkNoYW5nZXMge1xuICBASW5wdXQoKSBwdWJsaWMgY2x1c3Rlcml6ZSA9IGZhbHNlO1xuICBASW5wdXQoKSBwdWJsaWMgZGF0YXNvdXJjZTogYW55O1xuICBASW5wdXQoKSBwdWJsaWMgY2xhc3RlclByZXNldCA9ICdpc2xhbmRzI2JsdWVJY29uJztcbiAgQElucHV0KCkgcHVibGljIG9iamVjdFByZXNldCA9ICdpc2xhbmRzI2JsdWVDbHVzdGVySWNvbnMnO1xuICBASW5wdXQoKSBwdWJsaWMgZ3JpZFNpemUgPSAwO1xuICBASW5wdXQoKSBwdWJsaWMgc2VsZWN0ZWRPYmplY3RJZDogbnVtYmVyO1xuICBASW5wdXQoKSBwdWJsaWMgZmlsdGVyOiBhbnk7XG5cbiAgcHJpdmF0ZSBfaWQ6IHN0cmluZztcbiAgcHJpdmF0ZSBfb2JzZXJ2YWJsZVN1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbltdID0gW107XG4gIHByaXZhdGUgX2FkZGVkVG9NYW5nZXIgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9tYW5hZ2VyOiBPYmplY3RNYW5hZ2VyTWFuYWdlcikge1xuICAgIHRoaXMuX2lkID0gKG1hcmtlcklkKyspLnRvU3RyaW5nKCk7XG4gIH1cblxuICBwdWJsaWMgbmdPbkNoYW5nZXMoY2hhbmdlczogeyBba2V5OiBzdHJpbmddOiBTaW1wbGVDaGFuZ2UgfSkge1xuICAgIGlmICghdGhpcy5fYWRkZWRUb01hbmdlcikge1xuXG4gICAgICB0aGlzLl9tYW5hZ2VyLmFkZCh0aGlzKTtcbiAgICAgIHRoaXMuX2FkZGVkVG9NYW5nZXIgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChjaGFuZ2VzWydzZWxlY3RlZE9iamVjdElkJ10pIHtcbiAgICAgIHRoaXMuX21hbmFnZXIubmF2aWdhdGVUb0dlb09iamVjdCh0aGlzLCB0aGlzLnNlbGVjdGVkT2JqZWN0SWQpO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlc1snZmlsdGVyJ10pIHtcbiAgICAgIHRoaXMuX21hbmFnZXIuc2V0RmlsdGVyKHRoaXMsIHRoaXMuZmlsdGVyKTtcbiAgICB9XG5cbiAgfVxufVxuIiwiZXhwb3J0IGxldCB5YW5kZXg6IGFueTtcblxuZXhwb3J0IGludGVyZmFjZSBZYW5kZXhNYXAgZXh0ZW5kcyBNVkNPYmplY3Qge1xuXG4gIC8vIGNvbnN0cnVjdG9yKGVsOiBIVE1MRWxlbWVudCwgb3B0cz86IE1hcE9wdGlvbnMpOiB2b2lkO1xuICBldmVudHM6IGFueTtcbiAgZ2VvT2JqZWN0czogYW55O1xuICBzZXRDZW50ZXIocGFyYW06IGFueVtdKTogdm9pZDtcbiAgZ2V0Q2VudGVyKCk6IGFueTtcbiAgcGFuVG8ocG9pbnRzOiBhbnlbXSwgb3B0aW9uczogYW55W10pOiB2b2lkO1xuICByZW1vdmVPdmVybGF5KG92ZXJsYXk6IGFueSk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGF0TG5nIHtcbiAgLy8gY29uc3RydWN0b3IobGF0OiBudW1iZXIsIGxuZzogbnVtYmVyKTogdm9pZDtcbiAgbGF0KCk6IG51bWJlcjtcbiAgbG5nKCk6IG51bWJlcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUGFuVG9PYmplY3RzIHtcbiAgcG9pbnRzOiBhbnlbXTtcbiAgcGFyYW1zOiBhbnlbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNYXJrZXIgZXh0ZW5kcyBNVkNPYmplY3Qge1xuICAvLyBjb25zdHJ1Y3RvcigpOiB2b2lkO1xuICBldmVudHM6IGFueTtcbiAgYmFsbG9vbjogYW55O1xuICBsYXlvdXRCYWxsb29uOiBhbnk7XG4gIGJhbGxvb25Db250ZW50SGVhZGVyOiBzdHJpbmc7XG4gIGJhbGxvb25Db250ZW50Qm9keTogc3RyaW5nO1xuICBiYWxsb29uQ29udGVudEZvb3Rlcjogc3RyaW5nO1xuICBkcmFnZ2FibGU6IGJvb2xlYW47XG4gIGljb25MYXlvdXQ6IGFueTtcbiAgaWNvbkltYWdlSHJlZjogYW55O1xuICBpY29uSW1hZ2VTaXplOiBhbnk7XG4gIGljb25JbWFnZU9mZnNldDogYW55O1xuICBzZXRNYXAobWFwOiBZYW5kZXhNYXApOiB2b2lkO1xuICBzZXRQb3NpdGlvbihsYXRMbmc6IExhdExuZyB8IExhdExuZ0xpdGVyYWwpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsYXN0ZXIge1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tbWlzdXNlZC1uZXdcbiAgY29uc3RydWN0b3IoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNYXJrZXJDbGFzdGVyIHtcbiAgbGF0OiBudW1iZXI7XG4gIGxuZzogbnVtYmVyO1xuICBiYWxsb29uQ29udGVudEhlYWRlcjogc3RyaW5nO1xuICBiYWxsb29uQ29udGVudEJvZHk6IHN0cmluZztcbiAgYmFsbG9vbkNvbnRlbnRGb290ZXI6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExhdExuZ0xpdGVyYWwge1xuICBsYXQ6IG51bWJlcjtcbiAgbG5nOiBudW1iZXI7XG59XG5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpiYW4tdHlwZXNcbmV4cG9ydCBpbnRlcmZhY2UgTVZDT2JqZWN0IHsgYWRkTGlzdGVuZXIoZXZlbnROYW1lOiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKTogTWFwc0V2ZW50TGlzdGVuZXI7IH1cblxuZXhwb3J0IGludGVyZmFjZSBNYXBzRXZlbnRMaXN0ZW5lciB7IHJlbW92ZSgpOiB2b2lkOyB9XG5leHBvcnQgaW50ZXJmYWNlIE1vdXNlRXZlbnQgeyBsYXRMbmc6IExhdExuZzsgZ2V0OiBhbnk7IH1cbmV4cG9ydCBpbnRlcmZhY2UgTWFwQ2xpY2tNb3VzZUV2ZW50IHsgbGF0OiBudW1iZXI7IGxuZzogbnVtYmVyOyB9XG5leHBvcnQgaW50ZXJmYWNlIE1hcE1vdXNlRXZlbnQgeyBsYXQ6IG51bWJlcjsgbG5nOiBudW1iZXI7IG5hdGl2ZU1hcmtlcjogYW55OyB9XG5leHBvcnQgaW50ZXJmYWNlIE1hcE9wdGlvbnMge1xuICB6b29tPzogbnVtYmVyO1xuICBtaW5ab29tPzogbnVtYmVyO1xuICBtYXhab29tPzogbnVtYmVyO1xuICBjZW50ZXI/OiBhbnk7XG4gIHR5cGU6IGFueTtcbiAgY29udHJvbHM/OiBhbnlbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPYmplY3RNYW5hZ2VyIHtcbiAgY2x1c3Rlcml6ZTogYm9vbGVhbjtcbiAgb2JqZWN0czogYW55W107XG59XG4iLCJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgT25DaGFuZ2VzLFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgU2ltcGxlQ2hhbmdlcyxcbiAgSW5wdXQsXG4gIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7IFlhTWFwc0FQSVdyYXBwZXIgfSBmcm9tICcuLi95YS1tYXBzLWFwaS13cmFwcGVyJztcbmltcG9ydCB7IE1hcmtlck1hbmFnZXIgfSBmcm9tICcuLi9zZXJ2aWNlcy9tYW5hZ2Vycy9tYXJrZXItbWFuYWdlcic7XG5pbXBvcnQgeyBDbGFzdGVyTWFuYWdlciB9IGZyb20gJy4uL3NlcnZpY2VzL21hbmFnZXJzL2NsYXN0ZXItbWFuYWdlcic7XG5pbXBvcnQgeyBPYmplY3RNYW5hZ2VyTWFuYWdlciB9IGZyb20gJy4uL3NlcnZpY2VzL21hbmFnZXJzL29iamVjdE1hbmFnZXItbWFuYWdlcic7XG5pbXBvcnQgKiBhcyBtYXBUeXBlcyBmcm9tICcuLi95YS1tYXBzLXR5cGVzJztcblxuQENvbXBvbmVudCh7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjb21wb25lbnQtc2VsZWN0b3JcbiAgc2VsZWN0b3I6ICd5YS1tYXAnLFxuICBwcm92aWRlcnM6IFtcbiAgICBZYU1hcHNBUElXcmFwcGVyLFxuICAgIE1hcmtlck1hbmFnZXIsXG4gICAgQ2xhc3Rlck1hbmFnZXIsXG4gICAgT2JqZWN0TWFuYWdlck1hbmFnZXJcbiAgXSxcbiAgdGVtcGxhdGU6IGBcbiAgICA8ZGl2IGNsYXNzPVwibWFwLWNvbnRhaW5lci1pbm5lclwiIGlkPVwibWFwXCIgPlxuICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgIDwvZGl2PlxuICBgXG59KVxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmNvbXBvbmVudC1jbGFzcy1zdWZmaXhcbmV4cG9ydCBjbGFzcyBZYU1hcCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcblxuICBASW5wdXQoKSBwdWJsaWMgbG9uZ2l0dWRlID0gMDtcbiAgQElucHV0KCkgcHVibGljIGxhdGl0dWRlID0gMDtcbiAgQElucHV0KCkgcHVibGljIHpvb20gPSA4O1xuICBASW5wdXQoKSBwdWJsaWMgbWluWm9vbTogbnVtYmVyO1xuICBASW5wdXQoKSBwdWJsaWMgbWF4Wm9vbTogbnVtYmVyO1xuICBASW5wdXQoKSBwdWJsaWMgbWFwVHlwZTogYW55ID0gJ3lhbmRleCNtYXAnO1xuICBASW5wdXQoKSBwdWJsaWMgY29udHJvbHM6IGFueVtdID0gbnVsbDtcbiAgQElucHV0KCkgcHVibGljIHBhblRvT2JqZWN0czogbWFwVHlwZXMuUGFuVG9PYmplY3RzO1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXG4gIEBPdXRwdXQoKSBwdWJsaWMgbWFwQ2xpY2s6IEV2ZW50RW1pdHRlcjxtYXBUeXBlcy5NYXBDbGlja01vdXNlRXZlbnQ+ID0gbmV3IEV2ZW50RW1pdHRlcjxtYXBUeXBlcy5NYXBDbGlja01vdXNlRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSBwdWJsaWMgYWN0aW9uVGljazogRXZlbnRFbWl0dGVyPG1hcFR5cGVzLk1hcENsaWNrTW91c2VFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPG1hcFR5cGVzLk1hcENsaWNrTW91c2VFdmVudD4oKTtcblxuICBwdWJsaWMgbWFwSW5pdCA9IGZhbHNlO1xuXG4gIHByaXZhdGUgX29ic2VydmFibGVTdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2VsZW06IEVsZW1lbnRSZWYsIHByaXZhdGUgX21hcHNXcmFwcGVyOiBZYU1hcHNBUElXcmFwcGVyKSB7IH1cblxuICBwdWJsaWMgbmdPbkluaXQoKSB7XG4gICAgY29uc29sZS5sb2coJ21hcCBpaXQnKTtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLl9lbGVtLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1hcC1jb250YWluZXItaW5uZXInKTtcbiAgICB0aGlzLl9pbml0TWFwSW5zdGFuY2UoY29udGFpbmVyKTtcbiAgICB0aGlzLm1hcEluaXQgPSB0cnVlO1xuICB9XG5cbiAgcHVibGljIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICBpZiAodGhpcy5tYXBJbml0KSB7XG4gICAgICB0aGlzLnVwZGF0ZVBvc2l0aW9uKGNoYW5nZXMpO1xuICAgICAgdGhpcy5wYW5UbyhjaGFuZ2VzKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9pbml0TWFwSW5zdGFuY2UoZWw6IEhUTUxFbGVtZW50KSB7XG4gICAgaWYgKHRoaXMuY29udHJvbHMgIT0gbnVsbCkge1xuICAgICAgdGhpcy5fbWFwc1dyYXBwZXIuY3JlYXRlTWFwKGVsLCB7XG4gICAgICAgIGNlbnRlcjogW3RoaXMubGF0aXR1ZGUsIHRoaXMubG9uZ2l0dWRlXSwgem9vbTogdGhpcy56b29tLCB0eXBlOiB0aGlzLm1hcFR5cGUsXG4gICAgICAgIGNvbnRyb2xzOiB0aGlzLmNvbnRyb2xzXG4gICAgICB9KTtcblxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9tYXBzV3JhcHBlci5jcmVhdGVNYXAoZWwsIHtcbiAgICAgICAgY2VudGVyOiBbdGhpcy5sYXRpdHVkZSwgdGhpcy5sb25naXR1ZGVdLCB6b29tOiB0aGlzLnpvb20sIHR5cGU6IHRoaXMubWFwVHlwZVxuICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICB0aGlzLl9oYW5kbGVNYXBNb3VzZUV2ZW50cygpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVQb3NpdGlvbihjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgaWYgKGNoYW5nZXNbJ2xhdGl0dWRlJ10gPT0gbnVsbCAmJiBjaGFuZ2VzWydsb25naXR1ZGUnXSA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX21hcHNXcmFwcGVyLnNldENlbnRlcih0aGlzLmxhdGl0dWRlLCB0aGlzLmxvbmdpdHVkZSk7XG4gIH1cblxuICBwcml2YXRlIHBhblRvKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICBpZiAoY2hhbmdlc1sncGFuVG9PYmplY3RzJ10gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9tYXBzV3JhcHBlci5wYW5Ubyh0aGlzLnBhblRvT2JqZWN0cy5wb2ludHMsIHRoaXMucGFuVG9PYmplY3RzLnBhcmFtcyk7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVNYXBNb3VzZUV2ZW50cygpIHtcbiAgICBpbnRlcmZhY2UgRW1pdHRlciB7XG4gICAgICBlbWl0KHZhbHVlOiBhbnkpOiB2b2lkO1xuICAgIH1cbiAgICBpbnRlcmZhY2UgRXZlbnQgeyBuYW1lOiBzdHJpbmc7IGVtaXR0ZXI6IEVtaXR0ZXI7IH1cblxuICAgIGNvbnN0IGNsaWNrRXZlbnRzOiBFdmVudFtdID0gW1xuICAgICAgeyBuYW1lOiAnY2xpY2snLCBlbWl0dGVyOiB0aGlzLm1hcENsaWNrIH1cbiAgICBdO1xuICAgIGNvbnN0IGV2ZW50czogRXZlbnRbXSA9IFtcbiAgICAgIHsgbmFtZTogJ2FjdGlvbnRpY2snLCBlbWl0dGVyOiB0aGlzLmFjdGlvblRpY2sgfVxuICAgIF07XG5cbiAgICBjbGlja0V2ZW50cy5mb3JFYWNoKChlOiBFdmVudCkgPT4ge1xuICAgICAgY29uc3QgcyA9IHRoaXMuX21hcHNXcmFwcGVyLnN1YnNjcmliZVRvTWFwRXZlbnQ8eyBsYXRMbmc6IGFueSB9PihlLm5hbWUpLnN1YnNjcmliZShcbiAgICAgICAgKGV2ZW50OiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zdCBjb29yZHMgPSBldmVudC5nZXQoJ2Nvb3JkcycpO1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0geyBsYXQ6IGNvb3Jkc1swXSwgbG5nOiBjb29yZHNbMV0gfSBhcyBtYXBUeXBlcy5NYXBDbGlja01vdXNlRXZlbnQ7XG4gICAgICAgICAgZS5lbWl0dGVyLmVtaXQodmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIHRoaXMuX29ic2VydmFibGVTdWJzY3JpcHRpb25zLnB1c2gocyk7XG4gICAgfSk7XG5cbiAgICBldmVudHMuZm9yRWFjaCgoZTogRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHMgPSB0aGlzLl9tYXBzV3JhcHBlci5zdWJzY3JpYmVUb01hcEV2ZW50PHsgbGF0TG5nOiBhbnkgfT4oZS5uYW1lKS5zdWJzY3JpYmUoXG4gICAgICAgIChldmVudDogYW55KSA9PiB7XG5cbiAgICAgICAgICB0aGlzLl9tYXBzV3JhcHBlci5nZXRDZW50ZXIoKS50aGVuKChjb29yZHM6IGFueSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sYXRpdHVkZSA9IGNvb3Jkc1swXTtcbiAgICAgICAgICAgIHRoaXMubG9uZ2l0dWRlID0gY29vcmRzWzFdO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB7IGxhdDogY29vcmRzWzBdLCBsbmc6IGNvb3Jkc1sxXSB9IGFzIG1hcFR5cGVzLk1hcENsaWNrTW91c2VFdmVudDtcbiAgICAgICAgICAgIGUuZW1pdHRlci5lbWl0KHZhbHVlKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcbiAgICAgIHRoaXMuX29ic2VydmFibGVTdWJzY3JpcHRpb25zLnB1c2gocyk7XG4gICAgfSk7XG5cbiAgfVxufVxuXG5pbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5cbiIsImltcG9ydCB7IE1vZHVsZVdpdGhQcm92aWRlcnMsIE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBZYU1hcmtlciB9IGZyb20gJy4vZGlyZWN0aXZlcy9tYXJrZXInO1xuaW1wb3J0IHsgWWFDbGFzdGVyIH0gZnJvbSAnLi9kaXJlY3RpdmVzL2NsYXN0ZXInO1xuaW1wb3J0IHsgWWFPYmplY3RNYW5hZ2VyIH0gZnJvbSAnLi9kaXJlY3RpdmVzL29iamVjdE1hbmFnZXInO1xuaW1wb3J0IHsgWWFNYXBzQVBJTG9hZGVyLCBZYU1hcHNBUElMb2FkZXJDb25maWdMaXRlcmFsLCBMQVpZX01BUFNfQVBJX0NPTkZJRyB9IGZyb20gJy4vc2VydmljZXMveWEtbWFwcy1sb2FkZXInO1xuaW1wb3J0IHsgQlJPV1NFUl9HTE9CQUxTX1BST1ZJREVSUyB9IGZyb20gJy4vdXRpbHMvYnJvd3Nlci1nbG9iYWxzJztcbmltcG9ydCB7IFlhTWFwIH0gZnJvbSAnLi9kaXJlY3RpdmVzL3ltYXAnO1xuXG5leHBvcnQgKiBmcm9tICcuL3lhLW1hcHMtdHlwZXMnO1xuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gY29yZURpcmVjdGl2ZXMoKSB7XG4gIHJldHVybiBbXG4gICAgWWFNYXAsXG4gICAgWWFNYXJrZXIsXG4gICAgWWFDbGFzdGVyLFxuICAgIFlhT2JqZWN0TWFuYWdlclxuICBdO1xufVxuXG4vKipcbiAqIFRoZSBhbmd1bGFyLXlhLW1hcHMgY29yZSBtb2R1bGUuIENvbnRhaW5zIGFsbCBEaXJlY3RpdmVzL1NlcnZpY2VzL1BpcGVzXG4gKiBvZiB0aGUgY29yZSBtb2R1bGUuIFBsZWFzZSB1c2UgYFlhQ29yZU1vZHVsZS5mb3JSb290KClgIGluIHlvdXIgYXBwIG1vZHVsZS5cbiAqL1xuQE5nTW9kdWxlKHsgZGVjbGFyYXRpb25zOiBjb3JlRGlyZWN0aXZlcygpLCBleHBvcnRzOiBjb3JlRGlyZWN0aXZlcygpIH0pXG5leHBvcnQgY2xhc3MgWWFDb3JlTW9kdWxlIHtcbiAgLyoqXG4gICAqIFBsZWFzZSB1c2UgdGhpcyBtZXRob2Qgd2hlbiB5b3UgcmVnaXN0ZXIgdGhlIG1vZHVsZSBhdCB0aGUgcm9vdCBsZXZlbC5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZm9yUm9vdCh5YU1hcHNBUElMb2FkZXJDb25maWc6IFlhTWFwc0FQSUxvYWRlckNvbmZpZ0xpdGVyYWwpOiBNb2R1bGVXaXRoUHJvdmlkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmdNb2R1bGU6IFlhQ29yZU1vZHVsZSxcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAuLi5CUk9XU0VSX0dMT0JBTFNfUFJPVklERVJTLFxuICAgICAgICB7IHByb3ZpZGU6IFlhTWFwc0FQSUxvYWRlciwgdXNlQ2xhc3M6IFlhTWFwc0FQSUxvYWRlciB9LFxuICAgICAgICB7IHByb3ZpZGU6IExBWllfTUFQU19BUElfQ09ORklHLCB1c2VWYWx1ZTogeWFNYXBzQVBJTG9hZGVyQ29uZmlnIH1cbiAgICAgIF0sXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gWWFDb3JlTW9kdWxlRm9yUm9vdCh5YU1hcHNBUElMb2FkZXJDb25maWc6IFlhTWFwc0FQSUxvYWRlckNvbmZpZ0xpdGVyYWwpIHtcbiAgcmV0dXJuIFtcbiAgICBZYUNvcmVNb2R1bGUuZm9yUm9vdCh5YU1hcHNBUElMb2FkZXJDb25maWcpXG4gIF07XG59XG4iXSwibmFtZXMiOlsibWFya2VySWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7SUFPRTtLQUFpQjs7Z0JBTGxCLFVBQVUsU0FBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkI7Ozs7O3lCQUpEO0NBRUE7Ozs7OztBQ0ZBO0lBYUU7S0FBaUI7Ozs7SUFFakIsbUNBQVE7OztJQUFSO0tBQ0M7O2dCQWRGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsYUFBYTtvQkFDdkIsUUFBUSxFQUFFLCtDQUlUO2lCQUVGOzs7O0lBUUQsdUJBQUM7Q0FoQkQ7Ozs7OztBQ0ZBO0lBR0E7S0FNOEI7O2dCQU43QixRQUFRLFNBQUM7b0JBQ1IsWUFBWSxFQUFFLENBQUMsZ0JBQWdCLENBQUM7b0JBQ2hDLE9BQU8sRUFBRSxFQUNSO29CQUNELE9BQU8sRUFBRSxDQUFDLGdCQUFnQixDQUFDO2lCQUM1Qjs7SUFDNEIsb0JBQUM7Q0FOOUI7Ozs7OztBQ0RBO0lBQUE7S0FFQzs7OztJQURRLG1DQUFlOzs7SUFBdEIsY0FBZ0MsT0FBTyxNQUFNLENBQUMsRUFBRTtJQUNsRCxnQkFBQztDQUFBLElBQUE7O0FBR0Q7OztJQUFBO0tBTUM7Ozs7SUFKUSx1Q0FBaUI7OztJQUF4QjtRQUNFLE9BQU8sUUFBUSxDQUFDO0tBQ2pCO0lBRUgsa0JBQUM7Q0FBQSxJQUFBOztBQUVELElBQWEseUJBQXlCLEdBQWUsQ0FBQyxTQUFTLEVBQUUsV0FBVyxDQUFDOzs7Ozs7QUNmN0U7Ozs7O0FBT0MsSUFBYSxvQkFBb0IsR0FBRyxJQUFJLGNBQWMsQ0FBK0IsaUNBQWlDLENBQUM7O0lBbUJwSCx5QkFBc0QsTUFBa0IsRUFBRSxDQUFZLEVBQUUsQ0FBYztRQUExRix1QkFBQSxFQUFBLGFBQTREO1FBQ3BFLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FB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